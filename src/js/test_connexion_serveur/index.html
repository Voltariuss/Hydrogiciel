<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>test serveur</title>
    </head>
 
    <body>
        <h1>Communication avec socket.io !</h1>

        <p><input type="button" value="Get catalogue" id="btnCatalogue" /></p>

        <p><input type="button" value="Get flux 1" id="btnFlux1" onclick="getFlux1()" /></p>


        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:8080');
            var socket2 = io.connect('http://localhost:8088', {forceNew: true});

            socket.on('message', function(message) {
                alert('Le serveur a un message pour vous : ' + message);
            })
            
            socket.emit('message', 'getCatalogue');
            
            socket2.on('message', function(message){
                alert('Le serveur a un message pour vous : ' + message);
            })

            socket2.on('data', function(message){
                alert('Le serveur a un message pour vous : ' + message);
            })

            socket2.on('connect', function(message){
                alert('connection au serveur');
                console.log(socket2.connected);
            })

            socket2.on('pong', function(ms) {
                console.log('ping : ' + ms + ' ms');
            })

            socket2.on('error', (error) => {
                console.log(error);
            })

            function getFlux1() {
                /*socket2.emit('message', 'GET\r\n\r\n', (data) => {
                  console.log(data); // data will be 'woot'
                }));*/
                socket2.emit('ping');
            }
        </script>
    </body>
</html>